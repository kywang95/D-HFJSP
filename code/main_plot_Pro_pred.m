clear all
close all
% ---------------Settings of path of benchmark and results--------
pathofbenchmark='../benchmark/';

for dirc_idx=[1 2 5 8 11]
    % optimization
    switch dirc_idx
        %        statistical analysis
        case 0
            benchmark={
                'I_1_1_1.txt';'I_1_1_2.txt'; ...
                'I_1_1_3.txt';'I_1_1_4.txt'; ...
                'I_1_1_5.txt'; ...
                'I_2_2_1.txt';'I_2_2_2.txt'; ...
                'I_2_2_3.txt';'I_2_2_4.txt'; ...
                'I_2_2_5.txt'; ...
                'I_3_3_1.txt';'I_3_3_2.txt'; ...
                'I_3_3_3.txt';'I_3_3_4.txt'; ...
                'I_3_3_5.txt'; ...
                'I_4_4_1.txt';'I_4_4_2.txt'; ...
                'I_4_4_3.txt';'I_4_4_4.txt'; ...
                'I_4_4_5.txt'; ...
                };
        case 1
            benchmark={
                'I_20_80_1.txt';'I_20_80_2.txt'; ...
                'I_20_80_3.txt';'I_20_80_4.txt'; ...
                'I_20_80_5.txt';'I_20_80_6.txt'; ...
                'I_20_80_7.txt';'I_20_80_8.txt'; ...
                'I_20_80_9.txt';'I_20_80_10.txt'; ...
                'I_50_50_1.txt';'I_50_50_2.txt'; ...
                'I_50_50_3.txt';'I_50_50_4.txt'; ...
                'I_50_50_5.txt';'I_50_50_6.txt'; ...
                'I_50_50_7.txt';'I_50_50_8.txt'; ...
                'I_50_50_9.txt';'I_50_50_10.txt'; ...
                'I_80_20_1.txt';'I_80_20_2.txt'; ...
                'I_80_20_3.txt';'I_80_20_4.txt'; ...
                'I_80_20_5.txt';'I_80_20_6.txt'; ...
                'I_80_20_7.txt';'I_80_20_8.txt'; ...
                'I_80_20_9.txt';'I_80_20_10.txt'; ...
                };
        case 2
            benchmark={
                'I_40_160_1.txt';'I_40_160_2.txt'; ...
                'I_40_160_3.txt';'I_40_160_4.txt'; ...
                'I_40_160_5.txt';'I_40_160_6.txt'; ...
                'I_40_160_7.txt';'I_40_160_8.txt'; ...
                'I_40_160_9.txt';'I_40_160_10.txt'; ...
                };
        case 3
            benchmark={
                'I_100_100_1.txt';'I_100_100_2.txt'; ...
                'I_100_100_3.txt';'I_100_100_4.txt'; ...
                'I_100_100_5.txt';'I_100_100_6.txt'; ...
                'I_100_100_7.txt';'I_100_100_8.txt'; ...
                'I_100_100_9.txt';'I_100_100_10.txt'; ...
                };
        case 4
            benchmark={
                'I_160_40_1.txt';'I_160_40_2.txt'; ...
                'I_160_40_3.txt';'I_160_40_4.txt'; ...
                'I_160_40_5.txt';'I_160_40_6.txt'; ...
                'I_160_40_7.txt';'I_160_40_8.txt'; ...
                'I_160_40_9.txt';'I_160_40_10.txt'; ...
                };
        case 5
            benchmark={
                'I_60_240_1.txt';'I_60_240_2.txt'; ...
                'I_60_240_3.txt';'I_60_240_4.txt'; ...
                'I_60_240_5.txt';'I_60_240_6.txt'; ...
                'I_60_240_7.txt';'I_60_240_8.txt'; ...
                'I_60_240_9.txt';'I_60_240_10.txt'; ...
                };
        case 6
            benchmark={
                'I_150_150_1.txt';'I_150_150_2.txt'; ...
                'I_150_150_3.txt';'I_150_150_4.txt'; ...
                'I_150_150_5.txt';'I_150_150_6.txt'; ...
                'I_150_150_7.txt';'I_150_150_8.txt'; ...
                'I_150_150_9.txt';'I_150_150_10.txt';...
                };
        case 7
            benchmark={
                'I_240_60_1.txt';'I_240_60_2.txt'; ...
                'I_240_60_3.txt';'I_240_60_4.txt'; ...
                'I_240_60_5.txt';'I_240_60_6.txt'; ...
                'I_240_60_7.txt';'I_240_60_8.txt'; ...
                'I_240_60_9.txt';'I_240_60_10.txt'; ...
                };
        case 8
            benchmark={
                'I_80_320_1.txt';'I_80_320_2.txt'; ...
                'I_80_320_3.txt';'I_80_320_4.txt'; ...
                'I_80_320_5.txt';'I_80_320_6.txt'; ...
                'I_80_320_7.txt';'I_80_320_8.txt'; ...
                'I_80_320_9.txt';'I_80_320_10.txt'; ...
                };
        case 9
            benchmark={
                'I_200_200_1.txt';'I_200_200_2.txt'; ...
                'I_200_200_3.txt';'I_200_200_4.txt'; ...
                'I_200_200_5.txt';'I_200_200_6.txt'; ...
                'I_200_200_7.txt';'I_200_200_8.txt'; ...
                'I_200_200_9.txt';'I_200_200_10.txt'; ...
                };
        case 10
            benchmark={
                'I_320_80_1.txt';'I_320_80_2.txt'; ...
                'I_320_80_3.txt';'I_320_80_4.txt'; ...
                'I_320_80_5.txt';'I_320_80_6.txt'; ...
                'I_320_80_7.txt';'I_320_80_8.txt'; ...
                'I_320_80_9.txt';'I_320_80_10.txt'; ...
                };
        case 11
            benchmark={
                'I_100_400_1.txt';'I_100_400_2.txt'; ...
                'I_100_400_3.txt';'I_100_400_4.txt'; ...
                'I_100_400_5.txt'; ...
                };
        case 12
            benchmark={
                'I_100_400_6.txt';'I_100_400_7.txt'; ...
                'I_100_400_8.txt';'I_100_400_9.txt'; ...
                'I_100_400_10.txt'; ...
                };
        case 13
            benchmark={
                'I_250_250_1.txt';'I_250_250_2.txt'; ...
                'I_250_250_3.txt';'I_250_250_4.txt'; ...
                'I_250_250_5.txt';...
                
                };
        case 14
            benchmark={
                'I_250_250_6.txt';'I_250_250_7.txt'; ...
                'I_250_250_8.txt';'I_250_250_9.txt'; ...
                'I_250_250_10.txt'; ...
                };
        case 15
            benchmark={
                'I_400_100_1.txt';'I_400_100_2.txt'; ...
                'I_400_100_3.txt';'I_400_100_4.txt'; ...
                'I_400_100_5.txt'; ...
                
                };
        case 16
            benchmark={
                'I_400_100_6.txt';'I_400_100_7.txt'; ...
                'I_400_100_8.txt';'I_400_100_9.txt'; ...
                'I_400_100_10.txt'; ...
                };
    end
    alldata = cell(1,length(benchmark));
    
    for case_i = 1% :length(benchmark)
        fprintf('%s \n',benchmark{case_i});
        alldata{1,case_i}=load([pathofbenchmark benchmark{case_i}]);
        data = inputbm(alldata{1,case_i});
        maxb = 12;
        max_distance = 5;
        data1 = data;
        t0SA = 3;
        method_num = 4;
        queueLength = 500; utilityUB = 40;
        s_final_best_solution = {};
        
        %         iteration times for optimization
        %         max_iter_num = 10000;
        max_iter_num = size(data.Specimen, 2)*0.5;
        max_run_num = 1;
        
        %% optimization with RL-IO - HyperHeuristics
        'RL-IO'
        %         path_result='../statistical_analysis/RL-IO/';
        %         path_result1=sprintf('simu_%d',dirc_idx);
        %         pathdata=[path_result path_result1 '/'];
        %         if exist(pathdata, 'file') == 0
        %             fprintf(['Creating the folder\n' pathdata, '\n please check.\n']);
        %             mkdir(pathdata);
        %         end
        for test_case_i = 1:max_run_num
            %             fprintf('test %d ',test_case_i);
            %             filename = sprintf('data_%d_iter_%d', case_i, test_case_i);
            %             result = matfile(sprintf([pathdata filename], test_case_i), 'writable', true);
            [s1_final_best_value, s1_final_best_solution, s1_nfe, s1_cput, s1_trend, s1_Pro_record] ...
                =  nwk_HH_RL_IO(data1,max_iter_num,method_num,utilityUB);
            
            %             result.s1_final_best_value = s1_final_best_value;
            %             result.s1_final_best_solution =s1_final_best_solution;
            %             result.s1_nfe = s1_nfe;
            %             result.s1_cput = s1_cput;
            %             result.s1_trend = s1_trend;
            %             result.s1_Pro_record = s1_Pro_record;
            figure;
            plot(s1_Pro_record);
        end
        fprintf('\n');
        
        
    end
end
